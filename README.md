# Weather Forecast Subscription Service

## Опис

Цей сервіс надає API для підписки на регулярні оновлення прогнозу погоди для обраного міста. Користувачі можуть підписатися, підтвердити свою електронну пошту, а також відмовитися від підписки. Сервіс також включає API для отримання поточного прогнозу погоди для вказаного міста.

## API

### `/weather` (GET)

- **Опис:** Отримати поточний прогноз погоди для міста.
- **Параметри запиту:**
  - `city` (required, string): Назва міста для отримання прогнозу.
- **Відповіді:**
  - `200 OK`: Успішна операція - повертає поточний прогноз погоди у форматі JSON:
    ```json
    {
      "temperature": 25.5,
      "humidity": 60,
      "description": "Sunny"
    }
    ```
  - `400 Bad Request`: Недійсний запит (наприклад, відсутній параметр `city`).
  - `404 Not Found`: Місто не знайдено.

### `/subscribe` (POST)

- **Опис:** Підписатися на оновлення погоди.
- **Тіло запиту (formData або application/x-www-form-urlencoded):**
  - `email` (required, string): Електронна адреса для підписки.
  - `city` (required, string): Місто для отримання оновлень погоди.
  - `frequency` (required, string, enum: \["hourly", "daily"\]): Частота оновлень.
- **Відповіді:**
  - `200 OK`: Підписка успішна. На електронну адресу відправлено лист з підтвердженням.
  - `400 Bad Request`: Недійсні вхідні дані.
  - `409 Conflict`: Електронна адреса вже підписана на оновлення для цього міста.

### `/confirm/{token}` (GET)

- **Опис:** Підтвердити підписку електронної пошти.
- **Параметри шляху:**
  - `token` (required, string): Токен підтвердження з листа.
- **Відповіді:**
  - `200 OK`: Підписку успішно підтверджено.
  - `400 Bad Request`: Недійсний токен.
  - `404 Not Found`: Токен не знайдено.

### `/unsubscribe/{token}` (GET)

- **Опис:** Відписатися від оновлень погоди.
- **Параметри шляху:**
  - `token` (required, string): Токен відписки з листа.
- **Відповіді:**
  - `200 OK`: Відписку успішно виконано.
  - `400 Bad Request`: Недійсний токен.
  - `404 Not Found`: Токен не знайдено.

## Запуск за допомогою Docker

Для запуску сервісу в Docker необхідно виконати наступні кроки:

1.  Переконайтеся, що у вас встановлено Docker та Docker Compose.
2.  Склонуйте репозиторій з кодом сервісу.
3.  Створіть файл `.env` у корені проєкту та налаштуйте необхідні змінні середовища (наприклад, `MONGODB_URI`, облікові дані пошти, API-ключ WeatherAPI.com).
4.  Перейдіть до кореня проєкту в терміналі.
5.  Запустіть Docker Compose командою:
    ```bash
    docker-compose up -d --build
    ```

Після запуску сервіс буде доступний за адресою `http://localhost:3000`. База даних MongoDB буде запущена в окремому контейнері та доступна за стандартним портом.

## Тестування

Для запуску тестів необхідно виконати наступну команду в корені проєкту:

```bash
npm test
```
